<!DOCTYPE html>
<html lang="zh-cn">
<head prefix="og: http://ogp.me/ns#">
  <meta charset="utf-8">
  <title>News | Hawa Code</title>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Canonical links -->
  <link rel="canonical" href="https://hexo.io/en/news/2014/06/">
  <!-- Alternate links -->
  
  <!-- Icon -->
  <link rel="apple-touch-icon" sizes="57x57" href="/logo.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/logo.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/logo.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/logo.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/logo.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/logo.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/logo.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/logo.png">
  <link rel="icon" type="image/png" href="/logo.png" sizes="196x196">
  <link rel="icon" type="image/png" href="/logo.png" sizes="160x160">
  <link rel="icon" type="image/png" href="/logo.png" sizes="96x96">
  <link rel="icon" type="image/png" href="/logo.png" sizes="16x16">
  <link rel="icon" type="image/png" href="/logo.png" sizes="32x32">
  <meta name="msapplication-TileColor" content="#2f83cd">
  <meta name="msapplication-TileImage" content="/logo.png">
  <!-- CSS -->
  <!-- build:css build/css/navy.css -->
  
<link rel="stylesheet" href="/css/navy.css">

  <!-- endbuild -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-lato@0.0.75/index.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css">
  <!-- RSS -->
  <link rel="alternate" href="/atom.xml" title="Hawa Code" type="application/atom+xml">
  <!-- Open Graph -->
  <meta name="description" content="Hawa Code 一个懂你的、智能编程助手">
<meta property="og:type" content="website">
<meta property="og:title" content="News">
<meta property="og:url" content="https://hexo.io/news/2014/06/">
<meta property="og:site_name" content="Hawa Code">
<meta property="og:description" content="Hawa Code 一个懂你的、智能编程助手">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://hexo.io/icon/og-image-wide.png">
<meta property="article:author" content="Hawa Code">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://hexo.io/icon/twitter-summary.png">
<meta name="twitter:site" content="hexojs">
<meta property="fb:admins" content="100000247608790">
  <!-- Google Analytics -->
  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-48498357-3', 'auto');
  ga('send', 'pageview');
</script>

  <!-- Algolia -->
  <link rel="preconnect" href="https://7HZ261W96L-dsn.algolia.net" crossorigin />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3">
<meta name="generator" content="Hexo 8.1.1"></head>

<body>
  <div id="container">
    <header id="header" class="wrapper">
  <div id="header-inner" class="inner">
    <h1 id="logo-wrap">
      <a href="/" id="logo">Hexo</a>
    </h1>
    <nav id="main-nav">
      <a href="/docs/" class="main-nav-link">文档</a>
      <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/italking/hawa-code" class="main-nav-link"><i class="fab fa-github-alt"></i></a>
      <!-- Search removed: <div id="docsearch"></div> -->
    </nav>
    <div id="lang-select-wrap">
      <label id="lang-select-label"><i class="fa fa-globe"></i><span>简体中文</span></label>
      <select id="lang-select" data-canonical="">
        
           <option value="zh-cn" selected>简体中文</option>
        
           <option value="en">English</option>
        
      </select>
    </div>
    <a id="mobile-nav-toggle">
      <span class="mobile-nav-toggle-bar"></span>
      <span class="mobile-nav-toggle-bar"></span>
      <span class="mobile-nav-toggle-bar"></span>
    </a>
  </div>
</header>

    <div id="content-wrap">
  <div class="wrapper">
    <div class="inner">
      
        
          <article class="article post" itemscope itemtype="http://schema.org/Article">
  <header class="article-header">
    
      <h1>
        <a href="/news/2014/06/14/hexo-2-7-released/" class="article-title" itemprop="name">Hexo 2.7 Released</a>
      </h1>
    
    <a href="/news/2014/06/14/hexo-2-7-released/" class="article-date"><time datetime="2014-06-13T16:00:00.000Z">2014-06-14</time></a>
  </header>
  <div class="article-content" itemprop="articleBody">
    <html><head></head><body><p>Hexo 2.7 has been released with three new features. I’m going to introduce them below.</p>
<h2 id="Fragment-Caching" class="article-heading"><a href="#Fragment-Caching" class="headerlink" title="Fragment Caching"></a>Fragment Caching<a class="article-anchor" href="#Fragment-Caching" aria-hidden="true"></a></h2><p>Although Hexo is fast, it may become slow if you have thousands of source files or complicated categories or tags. Before the data model upgraded, I borrowed a feature from Ruby on Rails: <strong>Fragment Caching</strong>.</p>
<p>Fragment Caching saves contents within a fragment and serves the cache when the next request come in. A fragment will only be processed once. It can reduce database queries and decrease generation time significantly. For instance, a Hexo site with 300+ source files needs 6 minutes to generate. In Hexo 2.7, it only need 10 seconds!</p>
<p>It can be used in header, footer, sidebar or static contents that won’t be changed during generating. For example:</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">&lt;%- <span class="title function_">fragment_cache</span>(<span class="string">'header'</span>, <span class="keyword">function</span>(<span class="params"></span>){</span><br><span class="line">  <span class="keyword">return</span> <span class="string">'&lt;header&gt;&lt;/header&gt;'</span>;</span><br><span class="line">}); %&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>By using <code>fragment_cache</code> helper, contents in the function will be cached.</p>
<p>Partial helper also supports Fragment Caching, you only need to add a <code>{cache: true}</code> option when using partial.</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">&lt;%- <span class="title function_">partial</span>(<span class="string">'header'</span>, {}, {<span class="attr">cache</span>: <span class="literal">true</span>}) %&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/hexojs/hexo-theme-landscape">Landscape</a> is updated and supports Fragment Caching now. You can check <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/hexojs/hexo-theme-landscape/commit/d2aedda61571d6994eb72d784ceda2f59d2a8631">this commit</a> to see what’s changed.</p>
<h2 id="Relative-Link" class="article-heading"><a href="#Relative-Link" class="headerlink" title="Relative Link"></a>Relative Link<a class="article-anchor" href="#Relative-Link" aria-hidden="true"></a></h2><p>Relative Link is supported since Hexo 2.7. But your theme needs some modifications to support it. However, it’s not as hard as you think. You just need to replace the following contents in templates</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">&lt;%- config.<span class="property">root</span> %&gt;&lt;%- path %&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>with <code>url_for</code> helper.</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">&lt;%- <span class="title function_">url_for</span>(path) %&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><code>url_for</code> helper will add <code>config.root</code> automatically for you. If you enable <code>relative_link</code> setting, it’ll add a relative path.</p>
<p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/hexojs/hexo-theme-landscape">Landscape</a> is updated for Relative Link. You can check <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/hexojs/hexo-theme-landscape/commit/d29cbb83356373af27e7b98643f29a27804364af">this commit</a> to see what’s changed.</p>
<h2 id="Server-Middleware" class="article-heading"><a href="#Server-Middleware" class="headerlink" title="Server Middleware"></a>Server Middleware<a class="article-anchor" href="#Server-Middleware" aria-hidden="true"></a></h2><p>Server Middleware would be familiar if you have ever used <a target="_blank" rel="noopener external nofollow noreferrer" href="http://www.senchalabs.org/connect/">Connect</a> or <a target="_blank" rel="noopener external nofollow noreferrer" href="http://expressjs.com/">Express</a> before. <a target="_blank" rel="noopener external nofollow noreferrer" href="http://www.senchalabs.org/connect/">Connect</a> passes a request through functions called <strong>middleware</strong>. You can make response to the coming in request in middleware.</p>
<p>In Hexo, middleware is served as a type of filter. You can add middleware by registering a new filter. For example:</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">hexo.<span class="property">extend</span>.<span class="property">filter</span>.<span class="title function_">register</span>(<span class="string">'server_middleware'</span>, <span class="keyword">function</span>(<span class="params">app</span>){</span><br><span class="line">  app.<span class="title function_">use</span>(<span class="keyword">function</span>(<span class="params">req, res, next</span>){</span><br><span class="line">    res.<span class="title function_">setHeader</span>(<span class="string">'X-Powered-By'</span>, <span class="string">'Hexo'</span>);</span><br><span class="line">    <span class="title function_">next</span>();</span><br><span class="line">  });</span><br><span class="line">});</span><br></pre></td></tr></tbody></table></figure>

<p>This middleware add a header <code>X-Powered-By</code> and passes the request to the next middleware.</p>
</body></html>
  </div>
  
</article>

        
      
    </div>
  </div>
</div>
    <footer id="footer" class="wrapper">
  <div class="inner">
    <div id="footer-copyright">
      &copy; 2025 <a href="https://github.com/hexojs/hexo/graphs/contributors" rel="external nofollow noreferrer" target="_blank">Hawa Code</a><br>
    </div>
    <div id="footer-links">
      <a href="https://github.com/italking/hawa-code" rel="external nofollow noreferrer" class="footer-link" target="_blank"><i class="fab fa-github-alt"></i></a>
    </div>
  </div>
</footer>

  </div>
  <div id="mobile-nav-dimmer"></div>
  <nav id="mobile-nav">
  <div id="mobile-nav-inner">
    <ul id="mobile-nav-list">
      <a href="/docs/" class="mobile-nav-link">文档</a>
      <li class="mobile-nav-item">
        <a href="https://github.com/italking/hawa-code" class="mobile-nav-link" rel="external" target="_blank">GitHub</a>
      </li>
    </ul>
    
  </div>
  <div id="mobile-lang-select-wrap">
    <span id="mobile-lang-select-label"><i class="fa fa-globe"></i><span>简体中文</span></span>
    <select id="mobile-lang-select" data-canonical="">
      
        <option value="zh-cn" selected>简体中文</option>
      
        <option value="en">English</option>
      
    </select>
  </div>
</nav>
  <!-- Scripts -->
<!-- Cookie -->
<script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
<!-- build:js build/js/main.js -->

<script src="/js/lang_select.js"></script>


<script src="/js/mobile_nav.js"></script>


<script src="/js/colorScheme.js"></script>

<!-- endbuild -->

<!-- Algolia -->
<script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>
<script type="text/javascript">
docsearch({
  appId: '7HZ261W96L',
  apiKey: 'cb702f6ec26558e81b1f650f2e793b28',
  indexName: 'hexo',
  insights: true,
  container: '#docsearch',
  debug: false,
  searchParameters: {
    facetFilters: ['lang:zh-cn']
  }
});
</script>

</body>
</html>